apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudbill-config
  namespace: cloudbill
data:
  # Common configuration
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # Database configuration (non-sensitive)
  DB_HOST: "cloudbill-db.xxxxx.us-east-1.rds.amazonaws.com"  # Replace with actual RDS endpoint
  DB_PORT: "5432"
  DB_NAME: "cloudbill"
  DB_USER: "postgres"
  DB_SSL: "true"
  DB_POOL_MIN: "2"
  DB_POOL_MAX: "10"

  # Redis configuration (non-sensitive)
  REDIS_HOST: "cloudbill-redis.xxxxx.cache.amazonaws.com"  # Replace with actual ElastiCache endpoint
  REDIS_PORT: "6379"
  REDIS_TLS: "true"

  # JWT configuration (non-sensitive timeouts)
  JWT_EXPIRATION: "15m"
  JWT_REFRESH_EXPIRATION: "7d"

  # Service URLs (internal Kubernetes DNS)
  AUTH_SERVICE_URL: "http://auth-service:3001"
  BILLING_SERVICE_URL: "http://billing-service:3002"
  PAYMENT_SERVICE_URL: "http://payment-service:3003"
  NOTIFICATION_SERVICE_URL: "http://notification-service:3004"

  # API Gateway configuration
  CORS_ORIGIN: "https://yourdomain.com"  # Replace with actual frontend domain
  RATE_LIMIT_WINDOW_MS: "900000"  # 15 minutes
  RATE_LIMIT_MAX_REQUESTS: "100"

  # OAuth callback URLs (replace with actual domain)
  GOOGLE_CALLBACK_URL: "https://api.yourdomain.com/auth/google/callback"
  GITHUB_CALLBACK_URL: "https://api.yourdomain.com/auth/github/callback"

  # Email configuration
  EMAIL_FROM: "noreply@yourdomain.com"
  EMAIL_PROVIDER: "ses"
  AWS_SES_REGION: "us-east-1"

  # Stripe configuration (non-sensitive)
  STRIPE_PUBLISHABLE_KEY: "pk_live_xxxxx"  # Replace with actual publishable key
